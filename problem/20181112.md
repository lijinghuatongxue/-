# Redis

*MISCONF Redis is configured to save RDB snapshots, but is currently not able to persist on disk. Commands that may modify the data set are disabled. Please check Redis logs for details about the error*



Redis配置文件临时解决：

默认配置 stop-writes-on-bgsave-error yes当bgsave出错时数据将不能修改

```
vim redis.conf
stop-writes-on-bgsave-error no
```



根本解决：

更改内核参数

```
vm.overcommit_memory = 1
```

```
sysctl -p  #生效
```



vm.overcommit_memory = 0：则比较 此次请求分配的虚拟内存大小和系统当前空闲的物理内存加上swap，决定是否放行。

vm.overcommit_memory = 2：则会比较 进程所有已分配的虚拟内存加上此次请求分配的虚拟内存和系统当前的空闲物理内存加上swap，决定是否放行



原文链接：[http://blog.51cto.com/thedream/1944345](http://blog.51cto.com/thedream/1944345)

