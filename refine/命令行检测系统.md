## 前面的话

```
cpu属性值说明：

%user：CPU处在用户模式下的时间百分比。

%nice：CPU处在带NICE值的用户模式下的时间百分比。

%system：CPU处在系统模式下的时间百分比。

%iowait：CPU等待输入输出完成时间的百分比。

%steal：管理程序维护另一个虚拟处理器时，虚拟CPU的无意识等待时间百分比。

%idle：CPU空闲时间百分比。
```

## 综合

### dstat

```
结合了vmstat，iostat，ifstat，netstat以及更多的信息
实时显示统计情况
在分析和排障时可以通过启用监控项并排序
模块化设计
使用python编写的，更方便扩展现有的工作任务
容易扩展和添加你的计数器（请为此做出贡献）
包含的许多扩展插件充分说明了增加新的监控项目是很方便的
可以分组统计块设备/网络设备，并给出总数
可以显示每台设备的当前状态
极准确的时间精度，即便是系统负荷较高也不会延迟显示
显示准确地单位和和限制转换误差范围
用不同的颜色显示不同的单位
显示中间结果延时小于1秒
支持输出CSV格式报表，并能导入到Gnumeric和Excel以生成图形


参数


-c ：显示CPU系统占用，用户占用，空闲，等待，中断，软件中断等信息
-C ：当有多个CPU时候，此参数可按需分别显示cpu状态，例：-C 0,1 是显示cpu0和cpu1的信息
-n ：显示网络状态
-N eth1,total：有多块网卡时，指定要显示的网卡
-l ：显示负载统计量
-m ：显示内存使用率（包括used，buffer，cache，free值）
-r ：显示I/O请求情况
-s ：显示交换分区使用情况
-y ：系统状态
-t ：将当前时间显示在第一行
-p ：显示进程状态。
-g ：显示页面使用情况
--fs ：显示文件系统统计数据（包括文件总数量和inodes值）
--nocolor ：不显示颜色（有时候有用）
--socket ：显示网络统计数据
--tcp ：显示常用的TCP统计
--udp ：显示监听的UDP接口及其当前用量的一些动态数据
--disk-util ：显示某一时间磁盘的忙碌状况
--freespace ：显示当前磁盘空间使用率
--proc-count ：显示正在运行的程序数量
--top-bio ：指出块I/O最大的进程
--top-cpu ：图形化显示CPU占用最大的进程
--top-io ：显示正常I/O最大的进程
--top-mem ：显示占用最多内存的进程
--output ：输出.csv文件


#### 输出csv文件
dstat --output /tmp/sampleoutput.csv -cdngy

系统状态
dstat -y

---system--

 int  csw    #中断数    上下文切换数
```

### top

#### 系统平均运行时间和负载

前几行水平显示了不同系统参数的概括

top命令的顶部显示与uptime命令相似的输出，这些字段显示：

- 当前时间
- 系统已运行的时间
- 当前登录用户的数量
- 相应最近5、10和15分钟内的平均负载。

可以使用’l’命令切换uptime的显示。

#### 任务

第二行显示的是任务或者进程的总结。进程可以处于不同的状态。这里显示了全部进程的数量。除此之外，还有正在运行、睡眠、停止、僵尸进程的数量（僵尸是一种进程的状态）。

这些进程概括信息可以用’t’切换显示

#### CPU状态



us, user： 运行(未调整优先级的) 用户进程的CPU时间

sy，system: 运行内核进程的CPU时间

ni，niced：运行已调整优先级的用户进程的CPU时间

wa，IO wait: 用于等待IO完成的CPU时间

hi：处理硬件中断的CPU时间

si: 处理软件中断的CPU时间

st：这个虚拟机被hypervisor偷去的CPU时间（译注：如果当前处于一个hypervisor下的vm，实际上hypervisor也是要消耗一部分CPU处理时间的）。

可以按t图像化显示

 #### 内存使用

第一行是物理内存使用，第二行是虚拟内存使用(交换空间)。

物理内存显示如下:全部可用内存、空闲内存、已使用内存、缓冲内存。相似地：交换部分显示的是：全部、空闲、已使用和缓冲交换空间。

可以使用m图像化显示

#### 字段|列

在横向列出的系统属性和状态下面，是以列显示的进程。不同的列代表下面要解释的不同属性。

**PID**           进程ID，进程的唯一标识符

**USER**        进程所有者的实际用户名。

**PR**             进程的调度优先级。这个字段的一些值是’rt’。这意味这这些进程运行在实时态。

**NI  **          进程的nice值（优先级）。越小的值意味着越高的优先级。

**VIRT**          进程使用的虚拟内存。

**RES**            驻留内存大小。驻留内存是任务使用的非交换物理内存大小。

**SHR**           SHR是进程使用的共享内存。

**S**

这个是进程的状态。它有以下不同的值:

- D – 不可中断的睡眠态。
- R – 运行态
- S – 睡眠态
- T – 被跟踪或已停止
- Z – 僵尸态

**%CPU** 自从上一次更新时到现在任务所使用的CPU时间百分比。

**%MEM** 进程使用的可用物理内存百分比。

**TIME+** 任务启动后到现在所使用的全部CPU时间，精确到百分之一秒。

**COMMAND** 运行进程所使用的命令。

还有许多在默认情况下不会显示的输出，它们可以显示进程的页错误、有效组和组ID和其他更多的信息。

 #### 交互

##### 刷新页面

'空格' or ‘回车’

默认三秒刷新页面

##### 帮助 

'h'

##### 切换交替显示模式                   

'A' 

这个命令在全屏和交替模式间切换。在交替模式下会显示4个窗口（译注：分别关注不同的字段）:

1. Def （默认字段组）
2. Job （任务字段组）
3. Mem （内存字段组）
4. Usr （用户字段组）

这四组字段共有一个独立的可配置的概括区域和它自己的可配置任务区域。4个窗口中只有一个窗口是当前窗口。当前窗口的名称显示在左上方。（译注：只有当前窗口才会接受你键盘交互命令）

 我们可以用’a’和’w’在4个 窗口间切换。’a’移到后一个窗口，’w’移到前一个窗口。用’g’命令你可以输入一个数字来选择当前窗口。

##### 触发粗体显示

'B'

一些重要信息会以加粗字体显示。这个命令可以切换粗体显示。

##### 设置刷新时间

'd' or 's'

当按下’d’或’s’时，你将被提示输入一个值（以秒为单位），它会以设置的值作为刷新间隔。如果你这里输入了1，top将会每秒刷新

##### 切换负载，任务，内存信息显示

'l' 't' 'm'

##### 字段管理

'f'

##### 反向|常规排序

'R'

##### 显示进程完整路径

'c'

##### 显示空闲任务

'i'

##### 数视图

'V'

##### 改变配色

'Z'

按了大写Z之后，按1，回车，将会选择红色配色，以此类推

##### 颜色开关

'z'

##### 切换高亮信息

'x' 'y'

'x’将排序字段高亮显示（纵列）；’y’将运行进程高亮显示（横行

##### 制定特定用户

'u'

##### 设置最大显示任务的数量

'n' or  '#'

##### 传递结束信号

'k'

k一按下去，会让你输入一个将要被杀死的进程的pid，如若不输入任何pid，将会杀死当前出现的第一个

#### 参数

-b 批处理模式，以批处理模式启动top，在想用top输出保存文件是很有效

-c 命令/程序名触发，这个选项会以上次记住的程序/命令显示的状态显示（是否显示完整路径）。

-d 设置延迟间隔

-i 显示空闲进程

-n 设置迭代数量，将会在n次之后自动退出，若不写该参数，虽然也会执行，但是不会自动退出

-p 监控特定的pid 

-u 监控特定的用户

-U 监控特定的UID



### htop 









 

 

 

 

 

 

 

 

 

 

 

 

 

